import{bL as I,bM as z,f as d,bS as w,bT as P,I as h,U as W,bh as X,bP as k,bN as _,b0 as L,bu as j,bW as Y,bX as J,bY as A,aj as G,i as Z,k as Q,bZ as K,b_ as ee}from"./vendor-CdkM_rDc.js";import{_ as F,T as te,P as M,V as oe,C as ne,I as ae,R as se,a as re,c as le}from"./vue-components-BrGatKn-.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function s(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(a){if(a.ep)return;a.ep=!0;const r=s(a);fetch(a.href,r)}})();const ie={class:"page-container"},ce=I({__name:"App",setup(n){return(t,s)=>{const o=w("router-view");return P(),z("div",ie,[d(o)])}}}),ue=F(ce,[["__scopeId","data-v-e12ef009"]]),N="https://ai-tools.aogen.ai/resize",de={class:"main-content"},me={class:"text-center mb-4"},pe={class:"d-flex align-center"},ve=I({__name:"ResizeImage",setup(n){const t=h("resize");h("zh");const s=h("dimensions"),o=h(""),a=h(""),r=h(!0),i=h("original"),m=h(null),l=h({show:!1,text:"",color:"error"}),g=h(!1),U=c=>{var b;const e=(b=c.target.files)==null?void 0:b[0];if(e){const p=new FileReader;p.onload=R=>{var y;const u=new Image;u.onload=()=>{m.value=u,o.value=u.width.toString(),a.value=u.height.toString()},u.src=(y=R.target)==null?void 0:y.result},p.readAsDataURL(e)}},C=()=>{},V=(c,e="success")=>{l.value={show:!0,text:c,color:e}},$=async c=>{try{if(!m.value)throw new Error("No image loaded");g.value=!0;const e=new FormData,p=await(await fetch(m.value.src)).blob();e.append("image",p);const R={width:c.width,height:c.height,format:c.format==="original"?"":c.format,backgroundColor:c.backgroundColor||"",quality:85,dpi:c.dpi};if(c.targetFileSize){const S={KB:1024,MB:1048576,GB:1073741824},H=c.targetFileSize.size*S[c.targetFileSize.unit];R.targetFileSize=H}e.append("data",JSON.stringify(R));const u=await fetch(`${N}/api/image/resize`,{method:"POST",body:e});if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);let y="resized_image";const x=u.headers.get("content-disposition");if(x){const S=x.match(/filename="([^"]*)"/);S&&S[1]&&(y=S[1])}const v=await u.blob(),E=window.URL.createObjectURL(v),f=document.createElement("a");f.href=E,f.download=y,document.body.appendChild(f),f.click(),window.URL.revokeObjectURL(E),document.body.removeChild(f),V("图片处理成功！","success")}catch(e){console.error("处理图片失败:",e),V(e instanceof Error?e.message:"处理图片失败，请重试","error")}finally{g.value=!1}},O=c=>{c.ctrlKey&&c.preventDefault()};return W(()=>{window.addEventListener("wheel",O,{passive:!1})}),X(()=>{window.removeEventListener("wheel",O)}),(c,e)=>{const b=w("v-progress-circular"),p=w("v-card"),R=w("v-overlay"),u=w("v-icon"),y=w("v-btn"),x=w("v-snackbar");return P(),z("main",de,[d(R,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=v=>g.value=v),class:"align-center justify-center",persistent:"",scrim:"rgba(0,0,0,0.3)"},{default:k(()=>[d(p,{color:"white",width:"300",rounded:"lg",elevation:"8",class:"pa-4"},{default:k(()=>[_("div",me,[d(b,{indeterminate:"",color:"primary",size:"64"})]),e[9]||(e[9]=_("div",{class:"text-center text-body-1"}," 处理图片中... ",-1))]),_:1})]),_:1},8,["modelValue"]),d(te,{currentTool:t.value,"onUpdate:currentTool":e[1]||(e[1]=v=>t.value=v),resizeMode:s.value,"onUpdate:resizeMode":e[2]||(e[2]=v=>s.value=v),width:o.value,"onUpdate:width":e[3]||(e[3]=v=>o.value=v),height:a.value,"onUpdate:height":e[4]||(e[4]=v=>a.value=v),lockAspectRatio:r.value,"onUpdate:lockAspectRatio":e[5]||(e[5]=v=>r.value=v),exportFormat:i.value,"onUpdate:exportFormat":e[6]||(e[6]=v=>i.value=v),imageElement:m.value,disabled:g.value,onResizeImage:$},null,8,["currentTool","resizeMode","width","height","lockAspectRatio","exportFormat","imageElement","disabled"]),d(M,{imageElement:m.value,onFileUpload:U,onImageClick:C},null,8,["imageElement"]),d(x,{modelValue:l.value.show,"onUpdate:modelValue":e[8]||(e[8]=v=>l.value.show=v),color:l.value.color,timeout:3e3,location:"top",elevation:"4",rounded:"lg",class:"custom-snackbar"},{actions:k(()=>[d(y,{color:"white",variant:"text",onClick:e[7]||(e[7]=v=>l.value.show=!1)},{default:k(()=>e[10]||(e[10]=[L(" 关闭 ")])),_:1})]),default:k(()=>[_("div",pe,[d(u,{icon:l.value.color==="error"?"mdi-alert-circle":"mdi-check-circle",class:"me-2"},null,8,["icon"]),_("span",null,j(l.value.text),1)])]),_:1},8,["modelValue","color"])])}}}),fe=F(ve,[["__scopeId","data-v-da7b6781"]]),he={class:"main-content"},ge={class:"text-center mb-4"},_e={class:"tools-panel"},we={class:"d-flex gap-4 mb-4"},be={class:"mb-4"},ye={class:"d-flex gap-4 mb-6"},xe={class:"d-flex gap-4"},Re={class:"preview-panel"},ke={class:"d-flex align-center"},Ue=I({__name:"CropImage",setup(n){const t=h(null),s=h(!1),o=h(""),a=h(""),r=h("FreeForm"),i=h(""),m=h(""),l=h({show:!1,text:"",color:"error"}),g=c=>{var b;const e=(b=c.target.files)==null?void 0:b[0];if(e){const p=new FileReader;p.onload=R=>{var y;const u=new Image;u.onload=()=>{t.value=u,o.value=u.width.toString(),a.value=u.height.toString(),i.value="0",m.value="0"},u.src=(y=R.target)==null?void 0:y.result},p.readAsDataURL(e)}},U=()=>{},C=(c,e="success")=>{l.value={show:!0,text:c,color:e}},V=async()=>{try{if(!t.value)throw new Error("No image loaded");s.value=!0;const c=new FormData,b=await(await fetch(t.value.src)).blob();c.append("image",b);const p={width:parseInt(o.value),height:parseInt(a.value),x:parseInt(i.value),y:parseInt(m.value)};c.append("data",JSON.stringify(p));const R=await fetch(`${N}/api/image/crop`,{method:"POST",body:c});if(!R.ok)throw new Error(`HTTP error! status: ${R.status}`);const u=await R.blob(),y=window.URL.createObjectURL(u),x=new Image;x.onload=()=>{t.value=x,o.value=x.width.toString(),a.value=x.height.toString(),window.URL.revokeObjectURL(y)},x.src=y,C("图片裁剪成功！","success")}catch(c){console.error("裁剪图片失败:",c),C(c instanceof Error?c.message:"裁剪图片失败，请重试","error")}finally{s.value=!1}},$=()=>{t.value&&(o.value=t.value.width.toString(),a.value=t.value.height.toString(),i.value="0",m.value="0")},O=async()=>{if(t.value)try{const e=await(await fetch(t.value.src)).blob(),b=window.URL.createObjectURL(e),p=document.createElement("a");p.href=b,p.download="cropped_image",document.body.appendChild(p),p.click(),window.URL.revokeObjectURL(b),document.body.removeChild(p)}catch(c){console.error("下载图片失败:",c),C("下载图片失败，请重试","error")}};return(c,e)=>{const b=w("v-progress-circular"),p=w("v-card"),R=w("v-overlay"),u=w("v-text-field"),y=w("v-select"),x=w("v-btn"),v=w("v-icon"),E=w("v-snackbar");return P(),z("main",he,[d(R,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=f=>s.value=f),class:"align-center justify-center",persistent:"",scrim:"rgba(0,0,0,0.3)"},{default:k(()=>[d(p,{color:"white",width:"300",rounded:"lg",elevation:"8",class:"pa-4"},{default:k(()=>[_("div",ge,[d(b,{indeterminate:"",color:"primary",size:"64"})]),e[8]||(e[8]=_("div",{class:"text-center text-body-1"}," 处理图片中... ",-1))]),_:1})]),_:1},8,["modelValue"]),_("div",_e,[d(p,{class:"pa-4"},{default:k(()=>[e[12]||(e[12]=_("h2",{class:"text-h5 mb-4"},"Crop Rectangle",-1)),_("div",we,[d(u,{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=f=>o.value=f),label:"Width",type:"number",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"]),d(u,{modelValue:a.value,"onUpdate:modelValue":e[2]||(e[2]=f=>a.value=f),label:"Height",type:"number",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_("div",be,[d(y,{modelValue:r.value,"onUpdate:modelValue":e[3]||(e[3]=f=>r.value=f),label:"Aspect Ratio",items:["FreeForm","1:1","4:3","16:9"],variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),e[13]||(e[13]=_("h2",{class:"text-h5 mb-4"},"Crop Position",-1)),_("div",ye,[d(u,{modelValue:i.value,"onUpdate:modelValue":e[4]||(e[4]=f=>i.value=f),label:"Position (X)",type:"number",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"]),d(u,{modelValue:m.value,"onUpdate:modelValue":e[5]||(e[5]=f=>m.value=f),label:"Position (Y)",type:"number",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_("div",xe,[d(x,{block:"",color:"primary",variant:"outlined",disabled:!t.value||s.value,onClick:V},{default:k(()=>e[9]||(e[9]=[L(" Crop ")])),_:1},8,["disabled"]),d(x,{color:"secondary",variant:"outlined",disabled:!t.value||s.value,onClick:$},{default:k(()=>e[10]||(e[10]=[L(" Reset ")])),_:1},8,["disabled"])]),d(x,{block:"",color:"primary",class:"mt-4",disabled:!t.value||s.value,onClick:O},{default:k(()=>e[11]||(e[11]=[L(" Download Image → ")])),_:1},8,["disabled"])]),_:1})]),_("div",Re,[d(M,{imageElement:t.value,onFileUpload:g,onImageClick:U},null,8,["imageElement"])]),d(E,{modelValue:l.value.show,"onUpdate:modelValue":e[7]||(e[7]=f=>l.value.show=f),color:l.value.color,timeout:3e3,location:"top",elevation:"4",rounded:"lg",class:"custom-snackbar"},{actions:k(()=>[d(x,{color:"white",variant:"text",onClick:e[6]||(e[6]=f=>l.value.show=!1)},{default:k(()=>e[14]||(e[14]=[L(" 关闭 ")])),_:1})]),default:k(()=>[_("div",ke,[d(v,{icon:l.value.color==="error"?"mdi-alert-circle":"mdi-check-circle",class:"me-2"},null,8,["icon"]),_("span",null,j(l.value.text),1)])]),_:1},8,["modelValue","color"])])}}}),Ce=F(Ue,[["__scopeId","data-v-a6dbe10a"]]),Ve=[{path:"/",redirect:"/resize"},{path:"/resize",name:"resize",component:fe},{path:"/crop",name:"crop",component:Ce}],$e=Y({history:J(),routes:Ve});function Se(n,t){const s=t.modifiers||{},o=t.value,{once:a,immediate:r,...i}=s,m=!Object.keys(i).length,{handler:l,options:g}=typeof o=="object"?o:{handler:o,options:{attributes:(i==null?void 0:i.attr)??m,characterData:(i==null?void 0:i.char)??m,childList:(i==null?void 0:i.child)??m,subtree:(i==null?void 0:i.sub)??m}},U=new MutationObserver(function(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],V=arguments.length>1?arguments[1]:void 0;l==null||l(C,V),a&&B(n,t)});r&&(l==null||l([],U)),n._mutate=Object(n._mutate),n._mutate[t.instance.$.uid]={observer:U},U.observe(n,g)}function B(n,t){var s;(s=n._mutate)!=null&&s[t.instance.$.uid]&&(n._mutate[t.instance.$.uid].observer.disconnect(),delete n._mutate[t.instance.$.uid])}const Le={mounted:Se,unmounted:B};function Oe(n,t){var a,r;const s=t.value,o={passive:!((a=t.modifiers)!=null&&a.active)};window.addEventListener("resize",s,o),n._onResize=Object(n._onResize),n._onResize[t.instance.$.uid]={handler:s,options:o},(r=t.modifiers)!=null&&r.quiet||s()}function Ee(n,t){var a;if(!((a=n._onResize)!=null&&a[t.instance.$.uid]))return;const{handler:s,options:o}=n._onResize[t.instance.$.uid];window.removeEventListener("resize",s,o),delete n._onResize[t.instance.$.uid]}const Ie={mounted:Oe,unmounted:Ee};function D(n,t){const{self:s=!1}=t.modifiers??{},o=t.value,a=typeof o=="object"&&o.options||{passive:!0},r=typeof o=="function"||"handleEvent"in o?o:o.handler,i=s?n:t.arg?document.querySelector(t.arg):window;i&&(i.addEventListener("scroll",r,a),n._onScroll=Object(n._onScroll),n._onScroll[t.instance.$.uid]={handler:r,options:a,target:s?void 0:i})}function q(n,t){var r;if(!((r=n._onScroll)!=null&&r[t.instance.$.uid]))return;const{handler:s,options:o,target:a=n}=n._onScroll[t.instance.$.uid];a.removeEventListener("scroll",s,o),delete n._onScroll[t.instance.$.uid]}function ze(n,t){t.value!==t.oldValue&&(q(n,t),D(n,t))}const Pe={mounted:D,unmounted:q,updated:ze};function Fe(n,t){const s=typeof n=="string"?w(n):n,o=Te(s,t);return{mounted:o,updated:o,unmounted(a){A(null,a)}}}function Te(n,t){return function(s,o,a){var C,V,$;const r=typeof t=="function"?t(o):t,i=((C=o.value)==null?void 0:C.text)??o.value??(r==null?void 0:r.text),m=G(o.value)?o.value:{},l=()=>i??s.textContent,g=(a.ctx===o.instance.$?(V=je(a,o.instance.$))==null?void 0:V.provides:($=a.ctx)==null?void 0:$.provides)??o.instance.$.provides,U=Z(n,Q(r,m),l);U.appContext=Object.assign(Object.create(null),o.instance.$.appContext,{provides:g}),A(U,s)}}function je(n,t){const s=new Set,o=r=>{var i,m;for(const l of r){if(!l)continue;if(l===n||l.el&&n.el&&l.el===n.el)return!0;s.add(l);let g;if(l.suspense?g=o([l.ssContent]):Array.isArray(l.children)?g=o(l.children):(i=l.component)!=null&&i.vnode&&(g=o([(m=l.component)==null?void 0:m.subTree])),g)return g;s.delete(l)}return!1};if(!o([t.subTree]))return t;const a=Array.from(s).reverse();for(const r of a)if(r.component)return r.component;return t}const Ae=Fe(oe,n=>{var t;return{activator:"parent",location:(t=n.arg)==null?void 0:t.replace("-"," "),text:typeof n.value=="boolean"?void 0:n.value}}),Me=Object.freeze(Object.defineProperty({__proto__:null,ClickOutside:ne,Intersect:ae,Mutate:Le,Resize:Ie,Ripple:se,Scroll:Pe,Tooltip:Ae,Touch:re},Symbol.toStringTag,{value:"Module"})),Ne=K({components:le,directives:Me,theme:{defaultTheme:"light"}}),T=ee(ue);T.use(Ne);T.use($e);T.mount("#app");
