import{bL as U,bM as P,f as v,bS as _,bT as j,I as f,U as B,bh as q,bP as S,bN as C,b0 as D,bu as H,bW as W,bX as G,bY as A,aj as J,i as X,k as Y,bZ as Z,b_ as Q}from"./vendor-CdkM_rDc.js";import{_ as V,T as K,P as ee,V as te,C as oe,I as ne,R as se,a as re,c as ae}from"./vue-components-BrGatKn-.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function a(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=a(n);fetch(n.href,s)}})();const ce={class:"page-container"},ie=U({__name:"App",setup(t){return(e,a)=>{const o=_("router-view");return j(),P("div",ce,[v(o)])}}}),le=V(ie,[["__scopeId","data-v-e12ef009"]]),ue="https://ai-tools.aogen.ai/resize",de={class:"main-content"},me={class:"text-center mb-4"},pe={class:"d-flex align-center"},fe=U({__name:"ResizeImage",setup(t){const e=f("resize");f("zh");const a=f("dimensions"),o=f(""),n=f(""),s=f(!0),c=f("original"),d=f(null),i=f({show:!1,text:"",color:"error"}),m=f(!1),h=u=>{var R;const r=(R=u.target.files)==null?void 0:R[0];if(r){const y=new FileReader;y.onload=x=>{var g;const p=new Image;p.onload=()=>{d.value=p,o.value=p.width.toString(),n.value=p.height.toString()},p.src=(g=x.target)==null?void 0:g.result},y.readAsDataURL(r)}},b=()=>{},w=(u,r="success")=>{i.value={show:!0,text:u,color:r}},O=async u=>{try{if(!d.value)throw new Error("No image loaded");m.value=!0;const r=new FormData,y=await(await fetch(d.value.src)).blob();r.append("image",y);const x={width:u.width,height:u.height,format:u.format==="original"?"":u.format,backgroundColor:u.backgroundColor||"",quality:85,dpi:u.dpi};if(u.targetFileSize){const z={KB:1024,MB:1048576,GB:1073741824},N=u.targetFileSize.size*z[u.targetFileSize.unit];x.targetFileSize=N}r.append("data",JSON.stringify(x));const p=await fetch(`${ue}/api/image/resize`,{method:"POST",body:r});if(!p.ok)throw new Error(`HTTP error! status: ${p.status}`);let g="resized_image";const k=p.headers.get("content-disposition");if(k){const z=k.match(/filename="([^"]*)"/);z&&z[1]&&(g=z[1])}const l=await p.blob(),T=window.URL.createObjectURL(l),$=document.createElement("a");$.href=T,$.download=g,document.body.appendChild($),$.click(),window.URL.revokeObjectURL(T),document.body.removeChild($),w("图片处理成功！","success")}catch(r){console.error("处理图片失败:",r),w(r instanceof Error?r.message:"处理图片失败，请重试","error")}finally{m.value=!1}},L=u=>{u.ctrlKey&&u.preventDefault()};return B(()=>{window.addEventListener("wheel",L,{passive:!1})}),q(()=>{window.removeEventListener("wheel",L)}),(u,r)=>{const R=_("v-progress-circular"),y=_("v-card"),x=_("v-overlay"),p=_("v-icon"),g=_("v-btn"),k=_("v-snackbar");return j(),P("main",de,[v(x,{modelValue:m.value,"onUpdate:modelValue":r[0]||(r[0]=l=>m.value=l),class:"align-center justify-center",persistent:"",scrim:"rgba(0,0,0,0.3)"},{default:S(()=>[v(y,{color:"white",width:"300",rounded:"lg",elevation:"8",class:"pa-4"},{default:S(()=>[C("div",me,[v(R,{indeterminate:"",color:"primary",size:"64"})]),r[9]||(r[9]=C("div",{class:"text-center text-body-1"}," 处理图片中... ",-1))]),_:1})]),_:1},8,["modelValue"]),v(K,{currentTool:e.value,"onUpdate:currentTool":r[1]||(r[1]=l=>e.value=l),resizeMode:a.value,"onUpdate:resizeMode":r[2]||(r[2]=l=>a.value=l),width:o.value,"onUpdate:width":r[3]||(r[3]=l=>o.value=l),height:n.value,"onUpdate:height":r[4]||(r[4]=l=>n.value=l),lockAspectRatio:s.value,"onUpdate:lockAspectRatio":r[5]||(r[5]=l=>s.value=l),exportFormat:c.value,"onUpdate:exportFormat":r[6]||(r[6]=l=>c.value=l),imageElement:d.value,disabled:m.value,onResizeImage:O},null,8,["currentTool","resizeMode","width","height","lockAspectRatio","exportFormat","imageElement","disabled"]),v(ee,{imageElement:d.value,onFileUpload:h,onImageClick:b},null,8,["imageElement"]),v(k,{modelValue:i.value.show,"onUpdate:modelValue":r[8]||(r[8]=l=>i.value.show=l),color:i.value.color,timeout:3e3,location:"top",elevation:"4",rounded:"lg",class:"custom-snackbar"},{actions:S(()=>[v(g,{color:"white",variant:"text",onClick:r[7]||(r[7]=l=>i.value.show=!1)},{default:S(()=>r[10]||(r[10]=[D(" 关闭 ")])),_:1})]),default:S(()=>[C("div",pe,[v(p,{icon:i.value.color==="error"?"mdi-alert-circle":"mdi-check-circle",class:"me-2"},null,8,["icon"]),C("span",null,H(i.value.text),1)])]),_:1},8,["modelValue","color"])])}}}),ve=V(fe,[["__scopeId","data-v-da7b6781"]]),he=[{path:"/",redirect:"/resize"},{path:"/resize",name:"resize",component:ve}],_e=W({history:G(),routes:he});function we(t,e){const a=e.modifiers||{},o=e.value,{once:n,immediate:s,...c}=a,d=!Object.keys(c).length,{handler:i,options:m}=typeof o=="object"?o:{handler:o,options:{attributes:(c==null?void 0:c.attr)??d,characterData:(c==null?void 0:c.char)??d,childList:(c==null?void 0:c.child)??d,subtree:(c==null?void 0:c.sub)??d}},h=new MutationObserver(function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],w=arguments.length>1?arguments[1]:void 0;i==null||i(b,w),n&&F(t,e)});s&&(i==null||i([],h)),t._mutate=Object(t._mutate),t._mutate[e.instance.$.uid]={observer:h},h.observe(t,m)}function F(t,e){var a;(a=t._mutate)!=null&&a[e.instance.$.uid]&&(t._mutate[e.instance.$.uid].observer.disconnect(),delete t._mutate[e.instance.$.uid])}const ge={mounted:we,unmounted:F};function be(t,e){var n,s;const a=e.value,o={passive:!((n=e.modifiers)!=null&&n.active)};window.addEventListener("resize",a,o),t._onResize=Object(t._onResize),t._onResize[e.instance.$.uid]={handler:a,options:o},(s=e.modifiers)!=null&&s.quiet||a()}function ye(t,e){var n;if(!((n=t._onResize)!=null&&n[e.instance.$.uid]))return;const{handler:a,options:o}=t._onResize[e.instance.$.uid];window.removeEventListener("resize",a,o),delete t._onResize[e.instance.$.uid]}const xe={mounted:be,unmounted:ye};function I(t,e){const{self:a=!1}=e.modifiers??{},o=e.value,n=typeof o=="object"&&o.options||{passive:!0},s=typeof o=="function"||"handleEvent"in o?o:o.handler,c=a?t:e.arg?document.querySelector(e.arg):window;c&&(c.addEventListener("scroll",s,n),t._onScroll=Object(t._onScroll),t._onScroll[e.instance.$.uid]={handler:s,options:n,target:a?void 0:c})}function M(t,e){var s;if(!((s=t._onScroll)!=null&&s[e.instance.$.uid]))return;const{handler:a,options:o,target:n=t}=t._onScroll[e.instance.$.uid];n.removeEventListener("scroll",a,o),delete t._onScroll[e.instance.$.uid]}function Re(t,e){e.value!==e.oldValue&&(M(t,e),I(t,e))}const $e={mounted:I,unmounted:M,updated:Re};function ze(t,e){const a=typeof t=="string"?_(t):t,o=Se(a,e);return{mounted:o,updated:o,unmounted(n){A(null,n)}}}function Se(t,e){return function(a,o,n){var b,w,O;const s=typeof e=="function"?e(o):e,c=((b=o.value)==null?void 0:b.text)??o.value??(s==null?void 0:s.text),d=J(o.value)?o.value:{},i=()=>c??a.textContent,m=(n.ctx===o.instance.$?(w=Oe(n,o.instance.$))==null?void 0:w.provides:(O=n.ctx)==null?void 0:O.provides)??o.instance.$.provides,h=X(t,Y(s,d),i);h.appContext=Object.assign(Object.create(null),o.instance.$.appContext,{provides:m}),A(h,a)}}function Oe(t,e){const a=new Set,o=s=>{var c,d;for(const i of s){if(!i)continue;if(i===t||i.el&&t.el&&i.el===t.el)return!0;a.add(i);let m;if(i.suspense?m=o([i.ssContent]):Array.isArray(i.children)?m=o(i.children):(c=i.component)!=null&&c.vnode&&(m=o([(d=i.component)==null?void 0:d.subTree])),m)return m;a.delete(i)}return!1};if(!o([e.subTree]))return e;const n=Array.from(a).reverse();for(const s of n)if(s.component)return s.component;return e}const ke=ze(te,t=>{var e;return{activator:"parent",location:(e=t.arg)==null?void 0:e.replace("-"," "),text:typeof t.value=="boolean"?void 0:t.value}}),Ce=Object.freeze(Object.defineProperty({__proto__:null,ClickOutside:oe,Intersect:ne,Mutate:ge,Resize:xe,Ripple:se,Scroll:$e,Tooltip:ke,Touch:re},Symbol.toStringTag,{value:"Module"})),Ee=Z({components:ae,directives:Ce,theme:{defaultTheme:"light"}}),E=Q(le);E.use(Ee);E.use(_e);E.mount("#app");
