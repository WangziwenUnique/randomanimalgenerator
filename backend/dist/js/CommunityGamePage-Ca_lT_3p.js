import{d as e,r as a,c as t,b as l,B as n,C as o,t as s,F as i,j as m,o as u,l as r,g as c,h as d,e as v,k as g,w as h,A as p,u as y,a as f,n as w,f as b}from"./vendor-8eOgw1mB.js";import{b as k,G as C}from"./index-DoqfLQE-.js";const S={class:"comments-section"},I={class:"comment-form"},_=["disabled"],G=["disabled"],$={class:"comments-list"},j={key:0,class:"comments-loading"},z={key:1,class:"no-comments"},A={key:2,class:"comment-items"},P={class:"comment-header"},x={class:"comment-author"},D={class:"comment-date"},M=["innerHTML"],T=k(e({__name:"GameComments",props:{gameId:{}},setup(e){const r=e,c=a([]),d=a(""),v=a(!0),g=a(!1),h=e=>{const a=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(a)},p=async()=>{if(d.value.trim()&&!g.value){g.value=!0;try{const e={id:Date.now().toString(),author:"Emily Parker",content:d.value,date:(new Date).toISOString(),gameId:r.gameId};c.value.unshift(e),d.value=""}catch(e){}finally{g.value=!1}}};return(async()=>{v.value=!0;try{c.value=[{id:"1",author:"Sarah Johnson",content:'Great game! Really enjoyed the word combinations. The author did an amazing job selecting related words. Check out this cool tool too: <a href="https://aogen.ai/ai-tools/image-to-coloring-page">image-to-coloring-page</a>',date:(new Date).toISOString(),gameId:r.gameId}]}catch(e){}finally{v.value=!1}})(),(e,a)=>(u(),t("div",S,[a[1]||(a[1]=l("h2",{class:"comments-title"},"Comments",-1)),l("div",I,[n(l("textarea",{"onUpdate:modelValue":a[0]||(a[0]=e=>d.value=e),placeholder:"Share your thoughts about this game...",disabled:g.value,class:"comment-input"},null,8,_),[[o,d.value]]),l("button",{onClick:p,disabled:!d.value.trim()||g.value,class:"submit-comment-btn"},s(g.value?"Posting...":"Post Comment"),9,G)]),l("div",$,[v.value?(u(),t("div",j," Loading comments... ")):0===c.value.length?(u(),t("div",z," No comments yet. Be the first to comment! ")):(u(),t("div",A,[(u(!0),t(i,null,m(c.value,(e=>(u(),t("div",{key:e.id,class:"comment-item"},[l("div",P,[l("span",x,s(e.author),1),l("span",D,s(h(e.date)),1)]),l("p",{class:"comment-content",innerHTML:e.content},null,8,M)])))),128))]))])]))}}),[["__scopeId","data-v-2b403347"]]),H={class:"community-game"},R={class:"game-title"},B={class:"game-subtitle"},E={key:0,class:"category-hints"},F={class:"hints-grid"},L={class:"hint-content"},O={class:"hint-tip"},q=["onClick"],N={key:1,class:"category-name"},U={key:1,class:"loading-error"},J=k(e({__name:"CommunityGamePage",setup(e){const n=p(),o=y(),k=a(null),S=a([]),I=a([]),_=a(4),G=a(0),$=a(!1),j=a(!1),z=a(!1),A=a("Select four related words");let P=null;const x=r((()=>0===_.value)),D=r((()=>{const e=4===I.value.length;return e&&M(),e})),M=()=>{P&&(clearInterval(P),P=null)},J=()=>{G.value=0,M()},V=()=>{if(k.value){const e=k.value.categories.flatMap((e=>e.words));S.value=[...e].sort((()=>Math.random()-.5)),P||(P=window.setInterval((()=>{D.value||G.value++}),1e3))}},W=async e=>{if(!z.value&&k.value)try{z.value=!0;const a=new Set(e),t=k.value.categories.find((e=>e.words.every((e=>a.has(e)))&&e.words.length===a.size));if(t){const a={title:t.title,words:e,color:Z(),explanation:t.explanation,tip:t.tip};S.value=S.value.filter((a=>!e.includes(a))),I.value.push(a),4===I.value.length?A.value="Congratulations! You completed the game!":A.value="Select four related words",j.value=!1}else _.value>0&&(_.value--,A.value="These words don't form a group",j.value=!0,0===_.value&&(A.value="Game Over"))}catch(a){A.value="An error occurred",j.value=!0}finally{z.value=!1}},Y=()=>{J(),I.value=[],_.value=4,A.value="Select four related words",j.value=!1,V()},K=()=>{Y()},Q=()=>{J(),V()},X=["yellow","green","blue","purple"],Z=()=>X[I.value.length]||X[0],ee=e=>{document.title=`${e.name} - Community Connections Game`;let a=document.querySelector('meta[name="keywords"]');a||(a=document.createElement("meta"),a.setAttribute("name","keywords"),document.head.appendChild(a)),a.setAttribute("content",`${e.name}, Connections Game, Word Puzzle, ${e.creator}`);let t=document.querySelector('meta[name="description"]');t||(t=document.createElement("meta"),t.setAttribute("name","description"),document.head.appendChild(t)),t.setAttribute("content",`Play "${e.name}" - a custom Connections puzzle by ${e.creator}. Find connections between words.`)};c((()=>{(async e=>{$.value=!0;try{const a=await fetch(`https://connectionshinttoday.today/api/connections/games/${e}`),t=await a.json();t.success&&t.game?(k.value={name:t.game.name,author:t.game.creator,words:t.game.categories.flatMap((e=>e.words)),categories:t.game.categories},ee(t.game),V()):o.push("/community")}catch(a){o.push("/community")}finally{$.value=!1}})(n.params.gameId)})),d((()=>{M()}));const ae=e=>I.value.some((a=>a.title===e.title));return(e,a)=>{const n=f("router-link");return u(),t("div",H,[k.value?(u(),t(i,{key:0},[l("h1",R,s(k.value.name),1),l("p",B,"Created by "+s(k.value.author),1),v(C,{"shuffled-words":S.value,"completed-groups":I.value,"is-loading":$.value,"is-game-over":x.value,"remaining-attempts":_.value,"elapsed-time":G.value,"is-game-complete":D.value,"game-message":A.value,"is-error":j.value,"is-submitting":z.value,onRetry:Q,onRestartSame:Y,onStartNew:K,onSubmit:W},null,8,["shuffled-words","completed-groups","is-loading","is-game-over","remaining-attempts","elapsed-time","is-game-complete","game-message","is-error","is-submitting"]),D.value?g("",!0):(u(),t("div",E,[a[0]||(a[0]=l("h3",{class:"hints-title"},"Category Hints",-1)),l("div",F,[(u(!0),t(i,null,m(k.value.categories,((e,a)=>(u(),t("div",{key:a,class:w(["hint-item",{"hint-completed":ae(e)}])},[l("div",L,[l("p",O,s(e.tip),1),ae(e)?(u(),t("p",N,s(e.title),1)):(u(),t("button",{key:0,class:"reveal-btn",onClick:a=>(e=>{A.value=`Category Hint: "${e.title}"`})(e)}," Reveal Category ",8,q))])],2)))),128))])])),v(T,{"game-id":k.value.name},null,8,["game-id"])],64)):(u(),t("div",U,[a[2]||(a[2]=l("p",null,"Game not found",-1)),v(n,{to:"/community",class:"back-link"},{default:h((()=>a[1]||(a[1]=[b("Back to Community")]))),_:1})]))])}}}),[["__scopeId","data-v-c41c06fe"]]);export{J as default};
